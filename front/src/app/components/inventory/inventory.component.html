




<div class=" col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="height:100%" >
  <div id="newproduct" *ngIf="view==='new'">
      <div class="card-header grapheader" style ="text-align:center">
          <h1 *ngIf="mode ==='edit'" class="dept headtitle">EDIT PRODUCT</h1>
          <h1 *ngIf="mode ==='new'" class="dept headtitle">NEW PRODUCT</h1>
      </div>
     <form class="accountform staffsform" style="padding:15px;" (submit)= submit()>

    <div class="form-group vitals-section formGroup" style="margin-right:4px;">
        <label style="font-size:9px;" for="product" class="labelss duration">PRODUCT</label>
        <input style="font-size:11px" autocomplete="off" (keyup)="searchItem(input)"
        [(ngModel)] = input  type="text" name="name" class=" inputs dataInfo patientdata"  placeholder="Product name"/>
        <div *ngIf= temItems.length class="options">
          <ul class="itemsList" >
            <li *ngFor="let item of temItems"><p  class="dept firstheader drugItem" style="font-size:12px; padding-left: 5px; font-weight: normal;" >{{item.name+ ' '}}<span class="lastdept timetaken " (click) = "selectItem(item)">{{item.mesure + item.unit}}</span></p>
            </li>
          </ul>
        </div>
    </div>

    <div class="form-group vitals-section formGroup">
        <label for="price" class="labelss">PRICE</label>
        <input style="font-size:11px" [(ngModel)] = "product.stockInfo.price"  type="number" name="price" class=" inputs dataInfo patientdata"  placeholder="Price per item"/>
    </div>

    <div class="form-group vitals-section formGroup" style="margin-right:4px;">
        <label for="quantity" class="labelss">QUANTITY</label>
        <input style="font-size:11px" [(ngModel)] = "product.stockInfo.quantity" type="number" name="quantity" class=" inputs dataInfo patientdata"  placeholder="Quantity"/>
    </div>
    <div *ngIf="mode==='new'" class="form-group vitals-section formGroup"style=" width:42.5%;">
        <label for="expiry" class="labelss">EXPIRY DATE</label>
        <input style=" font-size:11px;border-top-right-radius: 0px; border-bottom-right-radius: 0px;" [(ngModel)] = "product.stockInfo.expiry" type="date" name="expiry" class=" inputs dataInfo patientdata"  placeholder="Expiry"/>
    </div>
    <div *ngIf="mode==='edit'" class="form-group vitals-section formGroup">
        <label for="expiry" class="labelss">EXPIRY DATE</label>
        <input style=" font-size:11px;" [(ngModel)] = "product.stockInfo.expiry" type="date" name="expiry" class=" inputs dataInfo patientdata"  placeholder="Expiry"/>
    </div>
    <div *ngIf="mode==='new'" class="form-group vitals-section formGroup" style=" width:6.5%;">

        <button (click)=addMore() type = "button" title="Add product"  id ="addmorebtn" class="btn btn-sm btn-outline-primary"><i class="icon ion-ios-plus-empty"></i></button>
    </div>


    <table *ngIf="temProducts.length"   cellspacing="0" class="data-table preveiewtable" summary="List of all items in store. "  data-aos="slide-up" data-aos-duration="900" data-aos-delay="50" data-aos-once="true">

        <thead >
            <tr  style="background:white;padding:0px; border-bottom: 1px solid whitesmoke;border-top: 1px solid whitesmoke" >


               <th  title = "Sort by name" style="padding-top:4px;padding-bottom: 4px; font-weight:bold;font-size:11px;color:darkgray" >Product Name

               </th>


               <th style="padding-top:4px;padding-bottom: 4px; font-weight:bold;font-size:11px;color:darkgrey"  title = "Sort by price" >Price
               </th>
               <th  style="padding-top:4px;padding-bottom: 4px; font-weight:bold;font-size:11px;color:darkgrey"  title="sort by quantity">Quantiy


            </th>

            <th style="text-align:right" style="padding-top:4px;padding-bottom: 4px; font-weight:bold;font-size:11px;color:darkgray; text-align: right;"  title="sort by date expired">Expiry Date

            </th>
          </tr>
        </thead>
        <tbody class="prevtablebody">

           <tr  *ngFor="let product of temProducts; let i = index" class="odd slideInUp faster" [ngClass]="{'select': item.selected}"  >

                <td style="padding-left: 5px;font-size:11px;">{{product.item.name+' '+product.item.mesure+product.item.unit}}</td>
                <td style="font-size:11px;">{{product.stockInfo.price}}</td>
                <td style="font-size:11px;">{{product.stockInfo.quantity}}</td>
                <td style="text-align:right;padding-right: 5px;font-size:11px">{{product.stockInfo.expiry|date:'dd/MM/y'}}</td>

            </tr>
        </tbody>


</table>

    <div class="form-group vitals-section address">
      <button (click)=switchViews() style="font-size:12px; width: 23%;right:30%;position: absolute "  type="button" class="btn btn-sm btn-outline-primary inputs" >Cancel</button>
      <button *ngIf="mode==='new'" style="font-size:12px; width: 23%;left:75%; position: absolute"  type="submit" class="btn btn-sm btn-outline-primary inputs" >Finish</button>
      <button *ngIf="mode==='edit'" style="font-size:12px; width: 23%;left:75%; position: absolute"  type="submit" class="btn btn-sm btn-outline-primary inputs" >Update</button>
    </div>

  </form>
</div>
    <table  *ngIf="products.length&&view==='products'" cellspacing="0" class="data-table" summary="List of all items in store. "  data-aos="slide-up" data-aos-duration="900" data-aos-delay="50" data-aos-once="true">

            <thead>
                <tr>
                   <th  class="checkhead"></th>

                   <th title = "Sort by name" (click)="sortProducts('name')" title="Sort by name">PRODUCT NAME
                      <span class="sorter">
                          <i *ngIf="sortBy ==='name'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                     </span>
                   </th>

                   <th title = "Sort by category" (click)="sortProducts('category')">CATEGORY
                      <span class="sorter">
                          <i *ngIf="sortBy ==='category'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                     </span>
                   </th>
                   <th title = "Sort by description" (click)="sortProducts('description')">DESCRIPTION
                      <span class="sorter">
                          <i *ngIf="sortBy ==='description'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                     </span>

                   </th>
                   <th title = "Sort by price" (click)="sortProducts('price')">PRICE
                      <span class="sorter">
                          <i *ngIf="sortBy==='price'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                     </span>

                   </th>
                   <th title = "Sort by quantity" (click)="sortProducts('quantity')" title="sort by quantity">IN STOCK
                      <span class="sorter">
                          <i *ngIf="sortBy==='quantity'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                     </span>

                    </th>
                      <th title = "Sort by sold"   (click)="sortProducts('sold')">SOLD
                          <span class="sorter">
                              <i *ngIf="sortBy==='sold'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                        </span>
                    </th>
                    <th title = "Sort by recently added" (click)="sortProducts('added')" title="Sort by date added">DATE ADDED
                        <span class="sorter">
                            <i *ngIf="sortBy==='added'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                      </span>
                    </th>
                    <th title="Sort by expired " (click)="sortProducts('expiry')" title="sort by date expired">DATE EXPIRY
                        <span class="sorter">
                            <i *ngIf="sortBy==='expiry'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                      </span>
                    </th>
                    <th title="sort by status" (click)="sortProducts('status')" style="text-align: center" title="sort by status">STATUS
                        <span class="sorter">
                            <i *ngIf="sortBy==='status'" style="color:lightgreen" class="icon ion-android-arrow-dropdown"></i>
                      </span>
                    </th>
                </tr>
            </thead>
            <tbody>

               <tr (click)=selectProduct(i) *ngFor="let product of products; let i = index" class="odd slideInUp faster" [class.selection]= product.selected  >
                    <td class="check-box">
                            <input type="checkbox" class="cbx" style="display: none;">
                            <label for="cbx" class="check">
                              <svg width="18px" height="18px" viewBox="0 0 18 18">
                                <path d="M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"></path>
                                <polyline points="1 9 7 14 15 4"></polyline>
                              </svg>
                            </label>
                    </td>
                    <td>{{product.item.name+' '+product.item.mesure+product.item.unit}}</td>
                    <td>{{product.item.category}}</td>
                    <td>{{product.item.description}}</td>
                    <td>{{product.stockInfo.price}}</td>
                    <td>{{product.stockInfo.quantity-product.stockInfo.sold}}</td>
                    <td>{{product.stockInfo.sold}}</td>
                    <td>{{product.addedOn|date:'dd/MM/y'}}</td>
                    <td>{{product.stockInfo.expiry|date:'dd/MM/y'}}</td>
                    <td style="text-align: center"><span class="moreIcon out"><i class="icon ion-ios-circle-filled" ></i></span></td>

                </tr>



            </tbody>


    </table>
    <!-- <h1 class="animated infinite bounce delay-2s">Example</h1> -->
</div>
<div class="options" *ngIf= selectionOccure()  style="height:45px; background-color:#f8f8f8;border: none; " >
  <i (click)="deleteProducts()" title="Delete" class="optionIcon icon ion-ios-trash-outline"></i>
  <i (click)="switchToEdit()" title="Edit" class="optionIcon editIcon icon ion-edit" data-target="#editModal" data-toggle="modal"></i>
  <i title="Select all" class="material-icons optionIcon cancelIcon">select_all</i>
  <!-- <i title="Clear selections" class="optionIcon cancelIcon icon io"></i> -->
</div>
