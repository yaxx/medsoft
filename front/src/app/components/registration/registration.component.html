
<div  class="modal " role="dialog" tabindex="-1" id="addModal" style="border-radius:32px;max-width:841px;margin: auto;padding-top: 35px">
        <div style="max-width: 730px;border-radius:32px;" class="modal-dialog" role="document">
            <div class="modal-content" style="width:100%; height:400px;border-radius:32px;padding-left:0px;padding-right: 0px;">
                <div class="modal-body" style="border-radius:32px;padding: 0px;">
                    <div class="card card-secondary historycard midlecard profilecard" style="margin:auto;min-height:400px;border-radius:32px;width:100%;position: absolute">
                        <div style='padding-left: 30px;border-top-right-radius:32px;border-top-left-radius:32px;border-bottom: 0px;height:40px;margin-bottom: 20px;' class="card-header profileheader small-header">
                           
                            <h6 style='font-size:11px;position:absolute;color:dodgerblue; font-weight: normal; top:18px;left:75%' class="patien-name small-name">NEW PATIENT</h6>
                        </div>
                        <div class="card-body orderbody" style="width:85%;margin:auto;">
                            <div class="steps">
                                <div [class.curent-step] = 'count===0' class="step-item">
                                    <span>
                                        <h6 class="step-lebel">PERONAL INFO</h6>
                                   </span>
                                    <span>
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                   </span>
                                </div>
                                <div [class.curent-step] = 'count===1' class="step-item">
                                    <span >
                                        <h6 class="step-lebel">CONTACT</h6>
                                    </span>
                                    <span >
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                   </span>
                                </div>
                                <div [class.curent-step] = 'count===2' class="step-item">
                                    <span>
                                        <h6 style="width: 94px;" class="step-lebel">EMERGENCY CONTACT</h6>
                                    </span>
                                    <span >
                                        <i  class="icon ion-ios-checkmark-empty paid-icon"></i>
                                    </span>
                                </div>
                              
                                </div>
                                <form *ngIf="count==0"  style="top: 3%; height:100%;width:60%;position: relative;margin:auto;" class=" staffsform">
                                    <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                        <label style="font-size:8px" for="firstname" class="labelss">FIRST NAME<span style='font-size:11px; color:red;'>*</span> </label>
                                        <input [(ngModel)]="patient.info.personal.firstName" style='font-size:11px;text-align: left' autocomplete="off" type="text" name="firstname" class="form-control patientdata dystolic inputs dataInfo">
                                    </div>
                                    <div style="width:49%; display:inline-block" class="form-group vitals-section">
                                        <label style="font-size:8px" for="lastname" class="labelss">LAST NAME<span style='font-size:11px; color:red;'>*</span> </label>
                                        <input [(ngModel)]="patient.info.personal.lastName" style='font-size:11px' autocomplete="off" type="text" name="lastname" class="form-control patientdata dystolic inputs dataInfo" />
                                    </div>
                                    <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                        <label style="font-size:8px" for="gender" class="labelss">GENDER</label>
                                        <select name='gender' [(ngModel)]="patient.info.personal.gender" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                            <option>Male</option>
                                            <option>Female</option>
                                        </select>
                                    </div>
                                    <div style="width:49%; display:inline-block" class="form-group vitals-section">
                                        <label style="font-size:8px" for="status" class="labelss">MARITAL STATUS</label>
                                        <select name='status' [(ngModel)]="patient.info.personal.mstatus" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                            <option>Married</option>
                                            <option>Single</option>
                                        </select>
                                    </div>
                                        <div style="width:49%; display:inline-block;margin-right: 5px; " class="form-group vitals-section">
                                            <label style="font-size:8px" for="dob" class="labelss">DATE OF BIRTH</label>
                                            <input name='dob' [(ngModel)]="patient.info.personal.dob" type="date" style='font-size:11px' autocomplete="off" class="form-control patientdata dystolic inputs dataInfo" />
                                        </div>
                                        <div style="width:49%; display:inline-block; " class="form-group vitals-section">
                                            <label style="font-size:8px" for="tribe" class="labelss">TRIBE</label>
                                            <input name='tribe' [(ngModel)]="patient.info.personal.tribe" type="text" style='font-size:11px' autocomplete="off" class=" form-control patientdata dystolic inputs dataInfo" />
                                        </div>
                                        <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                            <label style="font-size:8px" for="religion" class="labelss">RELIGION</label>
                                            <select name='religion' [(ngModel)]="patient.info.personal.religion" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                                <option>Islam</option>
                                                <option>Christianity</option>
                                                <option>Others</option>
                                            </select>
                                        </div>
                                        <div class="form-group vitals-section" style="width:49%; display:inline-block">
                                            <label style="font-size:8px" for="occupation" class="labelss">OCCUPATION</label>
                                            <select name='occupation' [(ngModel)]="patient.info.personal.occupation" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                                <option>Civil Servant</option>
                                                <option>Entreprenure</option>
                                                <option>Farmer</option>
                                                <option>House Wife</option>
                                                <option>Applicant</option>
                                                <option>Student</option>
                                                <option>Others</option>
                                            </select>
                                        </div>

                                        <div class="form-group vitals-section" style="width:49%; margin-right: 5px;  display:inline-block">
                                                <label style="font-size:8px" for="cardtype" class="labelss">CARD TYPE</label>
                                                <select name='cardtype' [(ngModel)]="card.category" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                                    <option *ngFor="let i of cardTypes">
                                                        {{i.item.name}}
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="form-group vitals-section" style="width:49%; display:inline-block">
                                                <label style="font-size:8px" for="cardnumber" class="labelss">CARD NUMBER</label>
                                                <input name='cardnumber' [(ngModel)]="card.pin" type="text" style='font-size:11px' autocomplete="off" class="form-control patientdata dystolic inputs dataInfo" />
                                            </div>
                                    </form>

                                    <form *ngIf="count==1"  style="top: 3%; height:100%;width:60%;position: relative;margin:auto;" class=" staffsform">
                                        <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                            <label style="font-size:8px" for="mobile" class="labelss">MOBILE<span style='font-size:11px; color:red;'>*</span></label>
                                            <input name='mobile' [(ngModel)]="patient.info.contact.me.mobile" type="text" style='font-size:11px' autocomplete="off" class="form-control patientdata dystolic inputs dataInfo" />
                                        </div>
                                        <div class="form-group vitals-section" style="width:49%; display:inline-block">
                                            <label style="font-size:8px" for="email" class="labelss">EMAIL</label>
                                            <input name='email' [(ngModel)]="patient.info.contact.me.email" type="text" style='font-size:11px' autocomplete="off" class="form-control patientdata dystolic inputs dataInfo" />
                                        </div>
                                        <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                            <label style="font-size:8px" for="statee" class="labelss">STATE</label>
                                            <select name='state' [(ngModel)]="patient.info.contact.me.state" style='font-size:11px' autocomplete="off" class=" patientdata dystolic inputs dataInfo">
                                                <option  *ngFor='let state of states'>{{state}}</option>
                                            </select>
                                        </div>
                                        <div style="width:49%; display:inline-block" class="form-group vitals-section">
                                            <label style="font-size:8px" for="lga" class="labelss">CITY</label>
                                            <select name='lga' [(ngModel)]="patient.info.contact.me.lga" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                                <option *ngFor='let lga of getLgas()'>{{lga}}</option>
                                            </select>
                                        </div>
                                        <div class="form-group vitals-section address">
                                            <label style="font-size:8px" for="address" class="labelss">ADDRESS</label>
                                            <input [(ngModel)]="patient.info.contact.me.address" style='font-size:11px' autocomplete="off" type="text" name="address" class="form-control patientdata dystolic inputs dataInfo" />
                                        </div>
                                    </form>

                                    <form *ngIf="count==2"  style="top: 3%; height:100%;width:60%;position: relative;margin:auto;" class=" staffsform">
                                    <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                        <label style="font-size:8px" for="ename" class="labelss">NAME</label>
                                        <input name='ename' [(ngModel)]="patient.info.contact.emergency.name" type="text" style='font-size:11px' autocomplete="off" class="form-control patientdata dystolic inputs dataInfo" />
                                    </div>
                                    <div class="form-group vitals-section" style="width:49%; display:inline-block">
                                        <label style="font-size:8px" for="emobile" class="labelss">MOBILE</label>
                                        <input name='emobile' [(ngModel)]="patient.info.contact.emergency.mobile" type="text" style='font-size:11px' autocomplete="off" class="form-control patientdata dystolic inputs dataInfo" />
                                    </div>
                                    <div class="form-group vitals-section" style="width:49%; margin-right: 5px; display:inline-block">
                                        <label style="font-size:8px" for="eoccp" class="labelss">OCCUPATION  </label>
                                        <select name='eoccp' [(ngModel)]="patient.info.contact.emergency.occupation" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                            <option>Civil Servant</option>
                                            <option>Entreprenure</option>
                                            <option>Farmer</option>
                                            <option>House Wife</option>
                                            <option>Applicant</option>
                                            <option>Student</option>
                                            <option>Other</option>
                                        </select>
                                    </div>
                                    <div style="width:49%; display:inline-block" class="form-group vitals-section">
                                        <label style="font-size:8px" for="rel" class="labelss">RELATIONSHIP</label>
                                        <select name='rel' [(ngModel)]="patient.info.contact.emergency.rel" style='font-size:11px' autocomplete="off" class="patientdata dystolic inputs dataInfo">
                                            <option>Freind</option>
                                            <option>Guadian</option>
                                            <option>Parent</option>
                                            <option>Spouse</option>
                                            <option>Sibling</option>
                                            <option>Other</option>
                                        </select>
                                    </div>
                                    <div class="form-group vitals-section address">
                                        <label style="font-size:8px" for="eaddress" class="labelss">ADDRESS</label>
                                        <input [(ngModel)]="patient.info.contact.emergency.address" name='eaddress' style='font-size:11px' autocomplete="off" type="text" name="address" class="form-control patientdata dystolic inputs dataInfo" />
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div style="left:12%; top:45%;position: absolute;
                        width: 7%;" class="btn-group disposition">
                            <button [disabled]='count === 0' (click)=prev() style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo " >
                                <i  style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Back" class="icon ion-android-arrow-back "> 
                                </i>
                            </button>
                        </div>
                        <div style="left: 76%; top:45%;position: absolute;
                        width: 7%;" class="btn-group disposition">
                            <button [disabled]='count === 2'(click)=next() style="width:32px;height: 32px;border-radius: 50%;left:35%"   class="btn btn-outline-primary  dispo " >
                                <i   style='position:absolute;right:36%;top:2px; font-size:large; cursor:pointer; display: inline-block;' title="Next" class="icon ion-android-arrow-forward "> 
                                </i>
                            </button>
                        </div>
                        <div *ngIf="count === 2" style="left:31%;    top: 286px;position:relative;width:53%" class="btn-group disposition">
                            <button  data-toggle="modal" data-target="#consModal"  style=" width: 170px;font-size: 10px; border-radius: 30px; height:27px;left:15%; bottom:10%;" class="btn btn-sm btn-outline-primary inputs mainbtn">CREATE RECORD
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>























<div *ngIf='patients.length' class="modal fade" role="dialog" tabindex="-1" id="enroleModal" style="border-radius:12px;width:auto;">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="width:480px;border-radius:0px;;padding-left:0px;padding-right: 0px;border-radius:12px;">
            <div class="modal-body" style="border-radius:0px;padding: 0px;border-radius:12px;">
                <div class="card card-secondary historycard midlecard profilecard" style="margin:auto;min-height:200px;border-radius:12px;">
                    <div style='padding-left: 30px;border-top-right-radius:12px;border-top-left-radius:12px;' class="card-header profileheader small-header">
                        <div style="left:23px" class="timeline lastdoc priscriber headerdp small-dp">
                            <img [src]=getDp(patients[curIndex].info.personal.avatar)/>
                        </div>
                        <a href="#" class="patien-name small-name">
                            {{patients[curIndex]?.info.personal.firstName + ' '+ patients[curIndex]?.info.personal.lastName}}<span class="small-headericon"></span>
                        </a>
                    </div>
                    <div style="width:54%;margin:auto" class="card-body orderbody">
                        <form (submit)=enrolePatient() style="top:15%; padding-left: 2%;margin-top:10px; padding-right: 2%;" class=" staffsform">
                            <div class="form-group vitals-section address">
                                <label style='font-size:8px' for="department" class="labelss">DEPARTMENT</label>
                                <select style='font-size:11px' [(ngModel)] = visit.dept class="patientdata status inputs dataInfo " name="department">     <option *ngFor ='let department of getDept()'>
                                    {{department.name}}
                                  </option>
                                </select>
                            </div>
                            <div class="form-group vitals-section address">
                                <label style='font-size:8px' for="cardnumber" class="labelss">CARD NUMBER</label>
                                <input [(ngModel)]=card autocomplete="off" type="text" name="cardnumber" placeholder="Scan patient card number" class="form-control patientdata dystolic inputs dataInfo" />
                            </div>
                        </form>
                    </div>
                    <div *ngIf=feedback style="padding:5px;border-top: 1px solid rgb(248, 247, 247)" class="card-footer">
                        <h6 class="feedbackMsg">{{feedback}}</h6>
                    </div>
                    <div (click)=enrolePatient() style='left:78%; height:32px;width:32px;' title='Enrole' class="floter">
                        <i *ngIf='processing' class="fa fa-circle-o-notch fa-spin fa-10x slow-spin" style="position:absolute;bottom:5px;left:5px;font-size:20px;color: #1da1f2;">
                        </i>
                        <i *ngIf='!processing' style="color:#1da1f2;bottom:-10px;" class="icon ion-ios-checkmark-empty flotericon">
                      </i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>






<nav class="navbar fixed-top navbar-light navbar-expand-md navigation-clean-search" style="padding:0px; margin-bottom:0px;">
    <div class="container">
        <a class="navbar-brand" href="#">
            <em>foldr</em>
        </a>
        <div class="collapse navbar-collapse" id="navcol-1">
            <form class="top-searchform" target="_self">
                <div class="form-group">
                    <input [(ngModel)]=searchTerm #search (keyup)='searchPatient(searchTerm)' autocomplete="off" style="border-radius:.999em; width:80%;display:inline-block;
                    position: absolute;   text-align: left; vertical-align: middle;  top:11%;
                    background-color: rgba(233, 236, 239, 0.7);box-shadow:none;outline:none;
                    "class="form-control" type="search" name="search" id="search-field"           placeholder="Search patient">
                    <i style='font-size:20px; top:3px;left:83%;position:relative;display:inline' class="icon ion-ios-search " title="Search"></i>
                    <h6 style='font-size:12px;left:98%;position:relative;display:inline-block;
                     color:grey; font-weight:normal;'>Sort:<span style='cursor:pointer; color:#1da1f2;'  (click)
                           ='toggleSortMenu()'>{{nowSorting}}</span></h6>
                    <div *ngIf=sortMenu style='position: absolute;left:120%; width:100px;top:6px;
                            height:110px' class="menu">
                        <ul (mouseleave)='toggleSortMenu()' class="actions primary">
                            <li (click)='sortPatients("name")' class="action">A-Z</li>
                            <li (click)='sortPatients("age")' class="action">Age</li>
                            <li (click)='sortPatients("status")' class="action">Status</li>
                            <li (click)='sortPatients("sex")' class="action">Gender</li>
                            <li (click)='sortPatients("date")' class="action">Date added</li>
                        </ul>
                    </div>
                </div>
            </form>
        </div>
      
    </div>
    <i *ngIf='routeHas("information")' (click)='clearPatient()' style="left:75%;" class="icon ion-ios-plus-empty arrow buble" id="add" title="Add Patient" data-target="#addModal" data-toggle="modal"></i>
    <div class="timeline lastdoc priscriber headerdp small-dp user-dp" style="left:90%;position:absolute;height:30px;width:30px;top:5px; margin-bottom:0px;"> <img style='height:100%; width:100%; object-fit:cover;' [src]=getMyDp()/></div>
</nav>

<div style="padding-top:60px" class="container">
    <div class="row">
        <div *ngIf='!patients.length' class='issue'>
            <div *ngIf='loading' class="lds-css ng-scope">
                <div style="width:100%;height:100%" class="lds-rolling">
                    <div></div>
                </div>
            </div>
            <div (click)=refresh() *ngIf='message' title='Refresh' class='refresh'><i class="icon ion-ios-reload "></i></div>
            <h6 *ngIf='message' style='font-size:13px;position:absolute;top:65%; width:100%; color:lightgrey;text-align: center'>{{message}}</h6>
        </div>
        <div *ngFor="let patient of patients; let i=index" class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-xs-12">
            <div *ngIf="patient.card.view === 'front'" class="card card-secondary maincard">
                <div style="border-radius:12px" class="card-header profileheader"><i class="icon ion-android-more-vertical headericon moreicon actions-icon"></i>
                    <div class="timeline lastdoc priscriber headerdp">
                        <img [src]=getDp(patient.info.personal.avatar)/>
                    </div>
                </div>
                <p style='margin-bottom:2px;' class="patien-name">{{patient.info.personal.firstName + ' '+ patient.info.personal.lastName}}</p>
                <div class="card-body mainbody">
                    <div class="carditem basic-item">
                        <h6 class="dept basic-info">Sex</h6>
                        <h6 class="dept basic-info sex-info">
                            {{patient.info.personal.gender.charAt(0).toUpperCase()}}
                        </h6>
                    </div>
                    <div class="carditem basic-item">
                        <h6 class="dept basic-info">Age</h6>
                        <h6 class="dept basic-info sex-info">{{patient.info.personal.dob|dob}}</h6>
                    </div>
                    <div class="carditem basic-item">
                        <h6 class="dept basic-info">Seen</h6>
                        <h6 class="dept basic-info sex-info">{{countVisits(i).length ||'---'}}</h6>
                    </div>
                    <div *ngIf=!patient.record.visits.length class="priscription basic-subinfo">
                        <div class="sub-container">
                            <h6 class="dept basic-secondary basic-value">
                                {{patient.record.visits[0][0].dept}}
                            </h6>
                        </div>
                        <div class="sub-container">
                            <h6 style="width:100%;text-align:center" class="dept basic-secondary basic-value">
                                {{patient.createdAt|date:'dd-MM-y'}}&nbsp;<span>
                              {{patient.createdAt|date:'hh:mma'|lowercase}}</span>
                            </h6>
                        </div>
                    </div>
                    <div *ngIf=patient.record.visits.length class="priscription basic-subinfo">
                        <div class="sub-container">
                            <h6 class="dept basic-secondary basic-value">
                                {{patient.record.visits[0][0].dept}}
                            </h6>
                        </div>
                        <div class="sub-container">
                            <h6 style="width:100%;text-align:center" class="dept basic-secondary basic-value">
                                {{patient.createdAt|date:'dd-MM-y'}}&nbsp;<span>
                              {{patient.createdAt|date:'hh:mma'|lowercase}}</span>
                            </h6>
                        </div>
                    </div>
                </div>
                <button *ngIf="routeHas('information')" data-toggle='modal' data-target='#enroleModal' (click)="selectPatient(i)" style=" width: 90px;font-size: 10px; height:27px;left:52%; bottom:7%;" class="btn btn-sm btn-outline-primary inputs mainbtn">ENROLE</button>
            </div>

            <div *ngIf="patient.card.view == 'back'" class="card card-secondary maincard">
                <i (click)='switchToFront(i)' style='font-size:19px;right:93%' title="Back" class="icon ion-android-arrow-back backIcon"></i>
                <div class="card-body">
                    <div class="carditem">
                        <div class="timeline condition"><i class="icon ion-ios-person-outline deticon"></i></div>
                        <h6 class="dept firstheader">PERSONAL INFO</h6>
                        <p class="dept previnfo">Age:<span class="predata">&nbsp;25</span></p>
                        <p class="dept previnfo">Gender:<span class="predata">
                              {{patient.info.personal.gender}}</span></p>
                        <p class="dept previnfo">Blood Group:<span class="predata">&nbsp;O+</span></p>
                        <p class="dept previnfo">Marital Staus:<span class="predata">&nbsp;
                              {{patient.info.personal.mstatus}}</span></p>
                        <p class="dept previnfo">Religion:<span class="predata">&nbsp;
                              {{patient.info.personal.religion}}</span></p>
                        <p class="dept previnfo">Tribe:<span class="predata">&nbsp;
                              {{patient.info.personal.tribe}}</span></p>
                        <p class="dept previnfo">Occupation:<span class="predata">&nbsp;
                              {{patient.info.personal.occupation}}</span></p>
                    </div>
                    <div class="carditem">
                        <div class="timeline condition"><i class="icon ion-ios-location-outline deticon"></i></div>
                        <h6 class="dept firstheader">CONTACT</h6>
                        <p class="dept previnfo">State:<span class="predata">&nbsp;
                              {{patient.info.contact.me.lga}}</span></p>
                        <p class="dept previnfo">LGA:<span class="predata">&nbsp;Azare</span></p>
                        <p class="dept previnfo">Mobile:<span class="predata">&nbsp;
                              {{patient.info.contact.me.mobile}}</span></p>
                        <p class="dept previnfo">Email:<span class="predata">&nbsp;{{patient.info.contact.me.email}}</span></p>
                        <p class="dept previnfo">Address:<span class="predata">&nbsp;
                              {{patient.info.contact.me.address}}</span></p>
                    </div>
                    <div title='Edit' class="floter"><i (click)=selectPatient(i) data-target="#newModal" data-toggle="modal" class="icon ion-edit flotericon"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
