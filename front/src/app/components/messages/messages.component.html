
<div class="sidenav">
  <a href="#" class="home homemenu" title="Menu">
      <span class="homespan">
          <i class="material-icons homeicon">sort</i>
      </span>
  </a>

  <a href="#" [routerLink]="['/pharmacy']"  class="home dashboard" title="Dashboard">
      <span class="homespan">
          <i class="icon ion-android-apps homeicon"></i>
      </span>
  </a>
  <a href="#" [routerLink]="['/information']" routerLinkActive="router-link-active"  class="home patienmenu" title="Patients">
      <span class="homespan">
          <i class="icon ion-ios-people-outline homeicon"></i>
      </span>
  </a>
  <a href="#" [routerLink]="['/consultation']" routerLinkActive="router-link-active"  class="home reviewmenu" title="Appointments">
      <span class="homespan">
          <i class="icon ion-ios-calendar-outline homeicon"></i>
      </span>
  </a>
  <a href="#" [routerLink]="['/products']" routerLinkActive="active"  class="home cartmenu" title="Products">
      <span class="homespan"> <i class="icon ion-ios-cart-outline homeicon"></i></span></a>
  <a href="#" [routerLink]="['/ward']" routerLinkActive="router-link-active"   class="home wardmenu" title="Ward"><span class="homespan"><i class="material-icons homeicon wardicon">airline_seat_individual_suite</i></span></a>
  <a href="#"  [routerLink]="['/account']" routerLinkActive="router-link-active" class="home settings" title="Settings"><span class="homespan"><i class="icon ion-ios-gear-outline homeicon"></i></span></a>
</div>
<nav  class="navbar fixed-top navbar-light navbar-expand-md navigation-clean-search" style="padding:0px; margin-bottom:0px">
<div class="container">
    <a class="navbar-brand" href="#">
        <em>MS</em>
    </a>
    <button class="navbar-toggler" data-toggle="collapse" data-target="#navcol-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navcol-1">
        <ul class="nav navbar-nav"></ul>

    </div>
</div>
<i style="left:20%;" class="icon ion-android-notifications-none arrow buble note" title="Notifications"></i>
<i style="left:25%; font-size: 22px;" class="icon ion-ios-chatboxes-outline arrow buble" title="Messages"></i>

<div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:90%;position:absolute;height:30px;width:30px;bottom:8%"></div>
</nav>
<div style="padding-top:40px;"
        class="container history-container">
        <div   class="row chatrow">
            <div  class="col col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                <div class="card-colums leftcolumn online-column" >
                    <div *ngIf = "leftcard==='contacts'" class="card card-secondary historycard leftcard contacts-card">
                        <div  class='card-header grapheader'>
                            <h1  class="dept headtitle">CONTACTS<span (click)="back()" class="backIcon">
                                </span>
                              </h1>
                              <i (click)="switchLeftCard('explore')" style="left:90%; top:0%; position:absolute" class="icon ion-ios-search searchicon" title="Search"></i>
                        </div>
                        <div class="card-body onlinesbody">
                            <div (click)=selectPerson(person) *ngFor="let person of contacts; let i=index" class="carditem people">
                                <!-- <div class="card-header profileheader person">

                                    <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;"></div>
                                    <p class="dept personname">Fareedah Za...&nbsp;<span class="timetaken chattime"><button class="btn btn-sm btn-primary inputs  mainbtn connection-btn" >Following</button></span></p>
                                    <h1 class="dept latestmsg">Hi</h1>
                                </div> -->
                                <div class="card-header profileheader person">
                                    <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;">
                                        <img [src] = getDp(person.person)/>
                                    <div *ngIf = 'person.person.info.online' class="indicator indicator-online"></div>
                                    </div>
                                    <p class="dept personname">
                                      {{person.person.info.personal.firstName}}&nbsp;<span class="timetaken chattime">&nbsp;25min&nbsp;</span></p>
                                    <h1 class="dept latestmsg">Hi</h1>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div *ngIf = "leftcard==='explore'" class="card card-secondary historycard leftcard contacts-card">
                        <div class="card-header grapheader explore-header">
                            <!-- <i title="Back" class="icon ion-android-arrow-back "></i> -->
                          <input (focus)="explore()" type="search" id="explore-search" class="explore-search" placeholder="Search" />
                        </div>
                        <div class="card-body onlinesbody">
                            <div *ngFor="let person of colegues; let i=index" class="carditem people">
                                <!-- <div class="card-header profileheader person">

                                    <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;"></div>
                                    <p class="dept personname">Fareedah Za...&nbsp;<span class="timetaken chattime"><button class="btn btn-sm btn-primary inputs  mainbtn connection-btn" >Following</button></span></p>
                                    <h1 class="dept latestmsg">Hi</h1>
                                </div> -->
                                <div class="card-header profileheader person">
                                    <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;">

                                    </div>
                                    <p class="dept personname">
                                        {{person.info.personal.firstName}}&nbsp;<span class="timetaken chattime"><button (click) = "follow(person)" class="btn btn-sm btn-outline-primary inputs  mainbtn connection-btn"    >Follow</button></span></p>
                                    <h1 class="dept latestmsg">Hi</h1>
                                </div>

                                <!-- <div class="card-header profileheader person">
                                    <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;"></div>
                                    <p class="dept personname">Amina Sulaiman<span class="timetaken chattime">&nbsp;25min&nbsp;</span></p>
                                    <h1 class="dept latestmsg">call you later</h1>
                                </div> -->

                            </div>
                        </div>
                    </div>
                  </div>
            </div>
            <div class="col col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 chatcolumn">
                <div class="card-colums chatcard-column">
                    <div class="card card-secondary historycard midlecard chatcard">
                        <div class="card-header grapheader">
                            <h1 class="dept headtitle">{{curPerson.info.personal.firstName}}</h1>
                        </div>
                        <div *ngIf='curConversations[0][0].sender!==null' class="card-body chat-body">
                          <div class="conversation-container">
                            <div *ngFor="let chats of curConversations; let i=index" class="message" [ngClass]="curConversations[i][0].sender === me?'message-send':'message-recieved'" >
                                <div *ngFor="let msg of chats; let last = last" class="message-container">
                                    <div class="message-avatar">
                                        <a href="#" class="profile-link"></a>
                                        <div class="msg-avatar">
                                            <span class="avatar-container"><img [src] = getMsgDp(msg.sender) [ngClass]="{'invisible':!last}" class=" msg-image"/>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="message-msg" >
                                        <div class="msg-contentContainer">
                                            <div  class="msg-text">
                                                <div class="msg-container">
                                                    <p class="msg-msg msg-size">{{msg.message}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="message-container">
                                    <div class="message-avatar"><a href="#" class="profile-link"></a>
                                        <div class="msg-avatar"><span class="avatar-container"><img src="../../../assets/img/model.jpg" class="msg-image" /></span></div>
                                    </div>
                                    <div class="message-msg">
                                        <div class="msg-contentContainer">
                                            <div class="msg-text">
                                                <div class="msg-container">
                                                    <p class="msg-msg msg-size">Hi</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                            </div>

                        </div>

                        </div>
                         <form class="chat-form">
                          <div class="message-group"><textarea name="chat" [(ngModel)] ="message"  (keypress)="check($event)"class="form-control inputs patientdata newpatient chat-message" placeholder="Type a message" rows="1"></textarea><i class="icon ion-image attachment" title="Attach file"></i>
                            <i class="icon ion-android-send attachment" title="Send"></i></div>
                      </form>
                    </div>
                </div>
            </div>
            <div class="col col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xl-3">
                <div class="card-colums rightcolumn suggest-column">
                  <div *ngIf = "rightCard === 'profile'" class="card card-secondary historycard rightcard medication profile-card" style='min-height:300px;max-height:300px; border-radius:0px'>
                      <div class="card-header profileheader">
                      <i (click)=toggleMenu() class="icon ion-android-more-vertical headericon moreicon actions-icon">
                      </i>
                      <div *ngIf=showMenu class="menu">
                          <ul class="actions primary">
                              <li (click)="switchToEdit('edit')" class="action">Edit profile</li>
                              <li class="action">Settings</li>
                          </ul>
                      </div>
                        <div class="timeline lastdoc priscriber headerdp profile-dp">
                            <img [src] = getDp(person)/>
                        </div>
                        </div>
                        <a href="#" class="patien-name profile-name">
                            {{person.info.personal.firstName+' '+person.info.personal.lastName}}</a>
                        <h6 class="bio">{{person.info.official.department}}</h6>
                        <div class="card-body rightcardbody">
                          <div class="carditem basic-item connections">
                            <h6 (click)="switchPeople('followers')" class="dept basic-info">Followers</h6>
                            <h6 (click)="switchPeople('followers')" class="dept basic-info sex-info">
                                {{getFollowers().length}}</h6>
                        </div>
                        <div class="carditem basic-item connections">
                            <h6 (click)="switchPeople('followings')" class="dept basic-info">Following</h6>
                            <h6 (click)="switchPeople('followings')"  class="dept basic-info sex-info">
                                {{getFollowings().length}}</h6>
                        </div>
                       <ul class="profile-info">
                          <li class="profile-item">
                              <span style='font-size:17px; top:2px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-home'></i></span>
                             Maternity
                            </li>
                         <li class="profile-item"><span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-person-outline'></i></span>
                          Born 11 Febuary, 1989
                        </li>
                         <li class="profile-item"><span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-android-calendar'></i></span>
                          Signed 22 Dec.
                        </li>

                       </ul>
                    </div>
                    </div>
                  <div *ngIf = "rightCard === 'edit'" class="card card-secondary historycard rightcard medication profile-card" style='min-height:440px;max-height:440px; border-radius:0px'>
                      <div style='padding: 5px 0px 10px 0px;' class="card-header profileheader">
                          <div style="padding-left:14px; border-bottom:0px" class="card-header grapheader">
                              <h1 style="padding-left:20px;" class="dept headtitle">EDIT PROFILE<span  (click)='switchMenu("profile")' class="backIcon">
                                <i title="Back" class="icon ion-android-arrow-back"></i></span>
                              </h1>
                          </div>
                      </div>
                      <div class="timeline lastdoc priscriber headerdp profile-dp ">
                          <div  (click)="picker.click()"  class="dp-wrapper"></div>
                          <img  *ngIf="!url"  [src] = getDp(person)/>
                          <img  *ngIf="url" [src] = url/>
                      </div>
                      <input style="position:absolute;display:none" (change) = fileSelected($event) #picker type ="file"  name="file"  class="patientdata dystolic inputs dataInfo" name="file" multipe ng2FileSelect [uploader] = uploader />
                        <a href="#" class="patien-name profile-name">
                            {{person.info.personal.firstName+' '+person.info.personal.lastName}}</a>
                        <h6 class="bio">
                          {{person.info.official.department}}
                        </h6>
                        <div class="card-body rightcardbody">
                        <ul class="profile-info">
                          <li class="profile-item">
                              <span style='font-size:17px; top:2px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-home-outline'></i></span>
                              {{person.info.official.department}}
                            </li>
                         <li class="profile-item"><span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-person-outline'></i></span>
                          Born 11 Febuary, 1989
                        </li>
                         <li class="profile-item"><span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-android-calendar'></i></span>
                          Signed 22 Dec.
                        </li>
                       </ul>
                       <ul class="profile-info">
                         <li  *ngIf='!input[0]' (mouseenter) = 'hovers[0] = 1'(mouseleave)='hovers[0] = 0'  class="profile-item"><span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-iphone'></i></span>
                          <span *ngIf='hovers[0]' class='predata' style='font-size:12px; top:5px;position:absolute; left:93%; color: rgb(114, 114, 114);'>
                            <i (click)='showInput(0)' class='icon ion-edit'></i>
                          </span>
                          {{person.info.contact.mobile}}
                        </li>
                         <li *ngIf='input[0]' class="profile-item">
                          <div class="form-group vitals-section address">
                            <input [(ngModel)]="editing.contact.mobile" style="padding-top:2px;font-size:11px;color: darkgray" autocomplete="off" type="text" name="drug" placeholder= "08068282257" class="patientdata dystolic inputs dataInfo"/>
                         </div>
                        </li>
                         <li *ngIf='!input[1]' (mouseenter) = 'hovers[1] = 1'(mouseleave)='hovers[1] = 0' class="profile-item">
                           <span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-email-outline'></i>
                          </span>
                           <span *ngIf='hovers[1]' class='predata' style='font-size:12px; top:5px;position:absolute; left:93%; color: rgb(114, 114, 114);'>
                            <i (click)='showInput(1)' class='icon ion-edit'></i>
                          </span>
                         {{person.info.contact.email}}
                        </li>
                        <li *ngIf='input[1]' class="profile-item">
                            <div class="form-group vitals-section address">
                              <input [(ngModel)]="editing.contact.email" style="padding-top:2px;font-size:11px;color: darkgray" autocomplete="off" type="text" name="email" placeholder= "me@example.com" class="patientdata dystolic inputs dataInfo"/>
                           </div>
                        </li>
                         <li *ngIf='!input[2]' (mouseenter) = 'hovers[2] = 1'(mouseleave)='hovers[2] = 0' class="profile-item">
                           <span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-information-outline'></i>
                          </span>
                           <span *ngIf='hovers[2]' class='predata' style='font-size:12px; top:5px;position:absolute; left:93%; color: rgb(114, 114, 114);'>
                            <i (click)='showInput(2)' class='icon ion-edit'></i>
                          </span>
                          {{person.info.personal.username}}
                        </li>
                        <li *ngIf='input[2]' class="profile-item">
                            <div class="form-group vitals-section address">
                              <input [(ngModel)]="editing.personal.username" style="padding-top:2px;font-size:11px; color: darkgray" autocomplete="off" type="text" name="username" placeholder= "User name" class="patientdata dystolic inputs dataInfo"/>
                           </div>
                        </li>
                         <li  *ngIf='!input[3]' (mouseenter) = 'hovers[3] = 1'(mouseleave)='hovers[3] = 0'  class="profile-item">
                           <span style='font-size:18px; top:3px;position:relative;  color: rgb(114, 114, 114);'><i class='icon ion-ios-locked-outline'></i>
                          </span>
                          <span *ngIf='hovers[3]' class='predata' style='font-size:12px; top:5px;position:absolute; left:93%; color: rgb(114, 114, 114);'>
                            <i (click)='showInput(3)' class='icon ion-edit'></i>
                          </span>
                          ******
                        </li>
                         <li *ngIf='input[3]' class="profile-item">
                          <div class="form-group vitals-section address">
                            <input [(ngModel)] = oldPwd style="padding-top:2px;font-size:11px;color: darkgray" autocomplete="off" type="text" name="password" placeholder= "Enter old password" class="patientdata dystolic inputs dataInfo"/>
                         </div>
                          <div class="form-group vitals-section address">
                            <input style="padding-top:2px;font-size:11px;color: darkgray" autocomplete="off" type="text" name="password" placeholder= "New password" class="patientdata dystolic inputs dataInfo"/>
                         </div>
                          <div *ngIf=errLine class="form-group vitals-section address">
                            <p style='color:red; font-size:11px; text-align:center'>Invalid old password</p>
                         </div>
                        </li>
                       </ul>
                    </div>

                    <button (click)='updateProfile()' style=" width: 90px; left:81px; bottom:2%; padding-top:3px;padding-bottom: 3px; "  type="submit" class="btn btn-sm btn-outline-primary inputs mainbtn" >
                        <i class="fa fa-circle-o-notch editicon continue blocked-icon fa-spin" style="font-size:11px;"></i>
                    Save
                    </button>
                    </div>
                    <div style="width:200px" *ngIf = "rightCard ==='connections'" class="card card-secondary historycard rightcard medication profile-card">
                      <div class="card-header grapheader">
                          <h1 style="padding-left:20px;" class="dept headtitle">FOLLOWERS<span (click)="back()" class="backIcon">
                            <i title="Back" class="icon ion-android-arrow-back "></i></span>
                          </h1>
                      </div>
                      <div *ngIf = "people === 'followers'" class="card-body onlinesbody">
                          <!-- <p *ngIf="!getFollowers()" class="placeholder">No followers yet</p> -->
                          <div *ngFor="let person of follows; let i=index" class="carditem people">
                             <div class="card-header profileheader person">
                                  <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;">
                                    <img [src] = getDp(person.person)/>
                                  </div>
                                  <p class="dept personname">
                                      {{person.person.info.personal.firstName}}&nbsp;<span class="timetaken chattime"><button *ngIf = '!person.following'
                                        (click)="followBack(person)" class="btn btn-sm btn-outline-primary inputs  mainbtn connection-btn"    >Follow</button>
                                        <button (click)= "unFollow(person)" title='Unfollow' *ngIf = 'person.following' class="btn btn-sm btn-primary inputs  mainbtn connection-btn" >Following</button>
                                      </span></p>
                                  <h1 class="dept latestmsg">Hi</h1>
                              </div>

                              <!-- <div class="card-header profileheader person">
                                  <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;"></div>
                                  <p class="dept personname">Amina Sulaiman<span class="timetaken chattime">&nbsp;25min&nbsp;</span></p>
                                  <h1 class="dept latestmsg">call you later</h1>
                              </div> -->

                          </div>
                      </div>
                      <div *ngIf = "people === 'followings'" class="card-body onlinesbody">
                          <p *ngIf="!getFollowings().length" class="placeholder">No followings yet</p>
                          <div *ngFor="let person of follows; let i=index" class="carditem people">
                             <div class="card-header profileheader person">
                                  <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;">
                                    <img [src] = getDp(person.person)/>
                                  </div>
                                  <p class="dept personname">
                                      {{person.person.info.personal.firstName}}&nbsp;<span class="timetaken chattime">
                                          <button title="Unfollow" (click) = "unFollow(person)" class="btn btn-sm btn-primary inputs  mainbtn connection-btn"    >Following</button></span></p>
                                  <h1 *ngIf="person.follower" style="color:lightgrey" class="dept latestmsg">Follows you</h1>
                              </div>

                              <!-- <div class="card-header profileheader person">
                                  <div class="timeline lastdoc priscriber headerdp small-dp user-dp"style="left:5%;position:absolute;height:30px;width:30px;top:25%;"></div>
                                  <p class="dept personname">Amina Sulaiman<span class="timetaken chattime">&nbsp;25min&nbsp;</span></p>
                                  <h1 class="dept latestmsg">call you later</h1>
                              </div> -->

                          </div>
                      </div>
                  </div>
                </div>
            </div>
        </div>
      </div>
